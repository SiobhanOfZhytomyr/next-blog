{"ast":null,"code":"import axios from 'axios';\nexport const getPosts = async () => {\n  let k = [];\n\n  try {\n    const res = await axios.get(`https://simple-blog-api.crew.red/posts`);\n    const ids = res.data.map(post => post.id);\n    await Promise.all(ids.map(async elem => {\n      const content = await axios({\n        method: \"GET\",\n        url: `https://simple-blog-api.crew.red/posts/${elem}`,\n        params: {\n          _embed: \"comments\"\n        }\n      });\n      console.log(content.data);\n      return content.data;\n    }));\n  } catch (e) {\n    console.log(e);\n  }\n};","map":{"version":3,"sources":["/home/nik/projects/js/next-blog/lib/api.ts"],"names":["axios","getPosts","k","res","get","ids","data","map","post","id","Promise","all","elem","content","method","url","params","_embed","console","log","e"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAKA,OAAO,MAAMC,QAAQ,GAAG,YAAW;AACjC,MAAIC,CAAS,GAAG,EAAhB;;AACE,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMH,KAAK,CAACI,GAAN,CAAW,wCAAX,CAAlB;AACA,UAAMC,GAAS,GAAGF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAcC,IAAD,IAAUA,IAAI,CAACC,EAA5B,CAAlB;AACA,UAAMC,OAAO,CAACC,GAAR,CACJN,GAAG,CAACE,GAAJ,CAAQ,MAAOK,IAAP,IAAgB;AACtB,YAAMC,OAAO,GAAG,MAAMb,KAAK,CAAC;AAC1Bc,QAAAA,MAAM,EAAE,KADkB;AAE1BC,QAAAA,GAAG,EAAG,0CAAyCH,IAAK,EAF1B;AAG1BI,QAAAA,MAAM,EAAE;AACNC,UAAAA,MAAM,EAAE;AADF;AAHkB,OAAD,CAA3B;AAOAC,MAAAA,OAAO,CAACC,GAAR,CAAYN,OAAO,CAACP,IAApB;AACA,aAAOO,OAAO,CAACP,IAAf;AACD,KAVD,CADI,CAAN;AAaD,GAhBD,CAgBE,OAAOc,CAAP,EAAU;AACVF,IAAAA,OAAO,CAACC,GAAR,CAAYC,CAAZ;AACD;AAEF,CAtBI","sourcesContent":["import axios from 'axios'\nimport {PostType, Posts} from './types'\n\ntype Id = {id: number}\ntype Ids = Id[]\nexport const getPosts = async() => {\n  let k : Posts = []\n    try {\n      const res = await axios.get(`https://simple-blog-api.crew.red/posts`);\n      const ids : Ids = res.data.map((post) => post.id);\n      await Promise.all(\n        ids.map(async (elem) => {\n          const content = await axios({\n            method: \"GET\",\n            url: `https://simple-blog-api.crew.red/posts/${elem}`,\n            params: {\n              _embed: \"comments\",\n            },\n          });\n          console.log(content.data)\n          return content.data\n        })\n      )\n    } catch (e) {\n      console.log(e);\n    }\n\n  };"]},"metadata":{},"sourceType":"module"}