{"ast":null,"code":"import axios from \"axios\";\nexport const getPosts = async () => {\n  const res = await axios.get(`https://simple-blog-api.crew.red/posts`);\n  const ids = res.data.map(post => post.id);\n  return await Promise.all(ids.map(async elem => {\n    const content = await axios({\n      method: \"GET\",\n      url: `https://simple-blog-api.crew.red/posts/${elem}`,\n      params: {\n        _embed: \"comments\"\n      }\n    });\n    return content.data;\n  }));\n};","map":{"version":3,"sources":["/home/nik/projects/js/next-blog/lib/api.ts"],"names":["axios","getPosts","res","get","ids","data","map","post","id","Promise","all","elem","content","method","url","params","_embed"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAKA,OAAO,MAAMC,QAAQ,GAAG,YAAY;AAClC,QAAMC,GAAG,GAAG,MAAMF,KAAK,CAACG,GAAN,CAAW,wCAAX,CAAlB;AACA,QAAMC,GAAQ,GAAGF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAcC,IAAD,IAAUA,IAAI,CAACC,EAA5B,CAAjB;AACA,SAAO,MAAMC,OAAO,CAACC,GAAR,CACXN,GAAG,CAACE,GAAJ,CAAQ,MAAOK,IAAP,IAAgB;AACtB,UAAMC,OAAO,GAAG,MAAMZ,KAAK,CAAC;AAC1Ba,MAAAA,MAAM,EAAE,KADkB;AAE1BC,MAAAA,GAAG,EAAG,0CAAyCH,IAAK,EAF1B;AAG1BI,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AADF;AAHkB,KAAD,CAA3B;AAOA,WAAOJ,OAAO,CAACP,IAAf;AACD,GATD,CADW,CAAb;AAYD,CAfM","sourcesContent":["import axios from \"axios\";\nimport { Posts } from \"./types\";\n\ntype Id = { id: number };\ntype Ids = Id[];\nexport const getPosts = async () => {\n  const res = await axios.get(`https://simple-blog-api.crew.red/posts`);\n  const ids: Ids = res.data.map((post) => post.id);\n  return await Promise.all<Posts[]>(\n    ids.map(async (elem) => {\n      const content = await axios({\n        method: \"GET\",\n        url: `https://simple-blog-api.crew.red/posts/${elem}`,\n        params: {\n          _embed: \"comments\",\n        },\n      });\n      return content.data;\n    })\n  );\n};\n"]},"metadata":{},"sourceType":"module"}