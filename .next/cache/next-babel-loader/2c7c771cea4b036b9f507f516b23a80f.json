{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/nik/projects/js/next-blog/pages/posts/[postId].tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nexport default function Post() {\n  _s();\n\n  var _this = this;\n\n  var router = useRouter();\n  var postId = router.query.postId;\n  var num = +postId;\n\n  var _useState = useState(\"\"),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var data = useSelector(function (state) {\n    return state.posts.find(function (post) {\n      return post.id === num;\n    });\n  });\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    var postData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios({\n                  method: \"POST\",\n                  url: \"https://simple-blog-api.crew.red/comments\",\n                  data: {\n                    postId: num,\n                    title: title\n                  }\n                });\n\n              case 3:\n                res = _context.sent;\n                console.log(res.data);\n                setTitle(\"\");\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function postData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    postData();\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, data.title, \", id - \", data.id), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, data.body), !data.comments.length ? __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, \"No comments yet\") : __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, data.comments.map(function (comment) {\n    return __jsx(\"li\", {\n      key: comment.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, comment.body);\n  })), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"Leave a comment\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    value: title,\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Create new comment\")), __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Back to home\")));\n}\n\n_s(Post, \"6vDmiegKc/Smd3FDqFi7Z6oC61I=\", false, function () {\n  return [useRouter, useSelector];\n});\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/home/nik/projects/js/next-blog/pages/posts/[postId].tsx"],"names":["useState","useSelector","useRouter","Link","axios","Post","router","postId","query","num","title","setTitle","data","state","posts","find","post","id","handleSubmit","e","preventDefault","postData","method","url","res","console","log","body","comments","length","map","comment","target","value"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { State } from \"../../redux/store/store\";\nexport default function Post() {\n  const router = useRouter();\n  const { postId } = router.query;\n  const num: number = +postId;\n  const [title, setTitle] = useState(\"\");\n  const data = useSelector((state: State) =>\n    state.posts.find((post) => post.id === num)\n  );\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const postData = async () => {\n      try {\n        const res = await axios({\n          method: \"POST\",\n          url: \"https://simple-blog-api.crew.red/comments\",\n          data: {\n            postId: num,\n            title,\n          },\n        });\n        console.log(res.data)\n        setTitle(\"\");\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    postData();\n  };\n  return (\n    <div>\n      <h1>\n        {data.title}, id - {data.id}\n      </h1>\n      <p>{data.body}</p>\n      {!data.comments.length ? (\n        <p>No comments yet</p>\n      ) : (\n        <ul>\n          {data.comments.map((comment) => (\n            <li key={comment.id}>{comment.body}</li>\n          ))}\n        </ul>\n      )}\n      <form onSubmit={handleSubmit}>\n        <p>Leave a comment</p>\n        <div>\n          <input\n            value={title}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n              setTitle(e.target.value)\n            }\n          />\n        </div>\n        <button type=\"submit\">Create new comment</button>\n      </form>\n      <Link href=\"/\">\n        <a>Back to home</a>\n      </Link>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}