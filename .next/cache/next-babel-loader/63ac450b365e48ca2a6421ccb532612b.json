{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nexport var getPosts = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var res, ids;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return axios.get(\"https://simple-blog-api.crew.red/posts\");\n\n          case 2:\n            res = _context2.sent;\n            ids = res.data.map(function (post) {\n              return post.id;\n            });\n            _context2.next = 6;\n            return Promise.all(ids.map( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(elem) {\n                var content;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return axios({\n                          method: \"GET\",\n                          url: \"https://simple-blog-api.crew.red/posts/\".concat(elem),\n                          params: {\n                            _embed: \"comments\"\n                          }\n                        });\n\n                      case 2:\n                        content = _context.sent;\n                        return _context.abrupt(\"return\", content.data);\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getPosts() {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/home/nik/projects/js/next-blog/lib/api.ts"],"names":["axios","getPosts","get","res","ids","data","map","post","id","Promise","all","elem","method","url","params","_embed","content"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAKA,OAAO,IAAMC,QAAQ;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACJD,KAAK,CAACE,GAAN,0CADI;;AAAA;AAChBC,YAAAA,GADgB;AAEhBC,YAAAA,GAFgB,GAELD,GAAG,CAACE,IAAJ,CAASC,GAAT,CAAa,UAACC,IAAD;AAAA,qBAAUA,IAAI,CAACC,EAAf;AAAA,aAAb,CAFK;AAAA;AAAA,mBAGTC,OAAO,CAACC,GAAR,CACXN,GAAG,CAACE,GAAJ;AAAA,mFAAQ,iBAAOK,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACgBX,KAAK,CAAC;AAC1BY,0BAAAA,MAAM,EAAE,KADkB;AAE1BC,0BAAAA,GAAG,mDAA4CF,IAA5C,CAFuB;AAG1BG,0BAAAA,MAAM,EAAE;AACNC,4BAAAA,MAAM,EAAE;AADF;AAHkB,yBAAD,CADrB;;AAAA;AACAC,wBAAAA,OADA;AAAA,yDAQCA,OAAO,CAACX,IART;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAR;;AAAA;AAAA;AAAA;AAAA,gBADW,CAHS;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARJ,QAAQ;AAAA;AAAA;AAAA,GAAd","sourcesContent":["import axios from \"axios\";\nimport { Posts } from \"./types\";\n\ntype Id = { id: number };\ntype Ids = Id[];\nexport const getPosts = async () => {\n  const res = await axios.get(`https://simple-blog-api.crew.red/posts`);\n  const ids: Ids = res.data.map((post) => post.id);\n  return await Promise.all<Posts[]>(\n    ids.map(async (elem) => {\n      const content = await axios({\n        method: \"GET\",\n        url: `https://simple-blog-api.crew.red/posts/${elem}`,\n        params: {\n          _embed: \"comments\",\n        },\n      });\n      return content.data;\n    })\n  );\n};\n"]},"metadata":{},"sourceType":"module"}